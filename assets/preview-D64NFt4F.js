import{h as a,d as y,H as r,w,R as d,e as b,o as v}from"./vendor-C9AuzQIH.js";import{m as k,a as u,b as h,c as P,t as j}from"./data-BNiK4gsS.js";import{l as x,d as C}from"./themes-D30gyLP9.js";function T(s,t=1,e=5){const n=(t-1)*e;return{data:s.slice(n,n+e),total:s.length,page:t,pageSize:e,totalPages:Math.ceil(s.length/e)}}const R=[a.get("/api/newsletters/search",async({request:s})=>{const t=new URL(s.url),e={query:t.searchParams.get("q")||void 0,categories:t.searchParams.getAll("categories"),tags:t.searchParams.getAll("tags"),sortBy:t.searchParams.get("sortBy"),page:parseInt(t.searchParams.get("page")||"1"),pageSize:parseInt(t.searchParams.get("pageSize")||"5")};await y(500);let n=k.filter(o=>{var p,g;const i=!e.query||o.title.toLowerCase().includes(e.query.toLowerCase())||o.description.toLowerCase().includes(e.query.toLowerCase()),m=!((p=e.categories)!=null&&p.length)||e.categories.some(l=>o.categories.includes(l)),f=!((g=e.tags)!=null&&g.length)||e.tags.some(l=>o.tags.includes(l));return i&&m&&f});switch(e.sortBy){case"subscribers":n.sort((o,i)=>i.subscriberCount-o.subscriberCount);break}const c=T(n,e.page,e.pageSize);return c.total===0?r.json(u.notFound,{status:404}):r.json(c)}),a.get("/api/user/preferences",()=>r.json(h.preferences)),a.post("/api/user/preferences",async({request:s})=>{try{const t=await s.json(),e={...h.preferences,...t};return r.json(e)}catch{return r.json({code:"BAD_REQUEST",message:"Invalid preferences update"},{status:400})}}),a.get("/api/categories",()=>r.json(P)),a.get("/api/tags",()=>r.json(j)),a.get("/api/error/network",()=>r.json(u.networkError,{status:500})),a.get("/api/error/unauthorized",()=>r.json(u.unauthorized,{status:401}))];typeof globalThis.expect>"u"&&(globalThis.expect=b);const A={parameters:{actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},backgrounds:{default:"light",values:[{name:"light",value:"#ffffff"},{name:"dark",value:"#1a202c"}]},layout:"centered",msw:{handlers:R},docs:{canvas:{sourceState:"shown"},source:{type:"code"},description:{component:"## Component Description",story:"### Story Description"}},a11y:{config:{rules:[{id:"color-contrast",enabled:!0}]}},headers:{"Content-Security-Policy":"default-src 'self' 'unsafe-inline' 'unsafe-eval' https:; font-src 'self' https://fonts.gstatic.com https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' data: https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://o4504455926185984.ingest.us.sentry.io; connect-src 'self' https: https://o4504455926185984.ingest.us.sentry.io; report-uri https://o4504455926185984.ingest.us.sentry.io/api/4508260154015744/envelope/"}},decorators:[w({themes:{light:x,dark:C},defaultTheme:"light",Provider:v}),s=>d.createElement("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto"}},d.createElement(s))]};export{A as default};
