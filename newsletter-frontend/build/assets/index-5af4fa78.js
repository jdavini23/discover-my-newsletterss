import{u as e,j as r,F as t,a as s}from"./pages-3cea39f5.js";import{r as n,R as i,A as o,f as a,C as l,g as c,E as d,I as h,i as p}from"./vendor-b2d6fadb.js";import{N as u,_ as m,R as _,b as f,B as g}from"./vendor-ui-e4b1e923.js";import{c as E,d as y,p as b,I as v}from"./vendor-libs-a0c97417.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)})).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();const w=({children:s,requiredRoles:n})=>{var i;const{isAuthenticated:o,user:a}=e(),l=!n||(null==(i=null==a?void 0:a.roles)?void 0:i.some((e=>n.includes(e))));return o()?n&&!l?r(u,{to:"/unauthorized",replace:!0}):r(t,{children:s}):r(u,{to:"/login",replace:!0})};E()(y(b((e=>({user:{isAuthenticated:!1,mfaEnabled:!1},setUser:r=>e((e=>({user:{...e.user,...r}}))),clearUser:()=>e({user:{isAuthenticated:!1,mfaEnabled:!1}})})),{name:"user-storage"}))),E()(y((e=>({newsletters:[],selectedNewsletter:null,setNewsletters:r=>e({newsletters:r}),selectNewsletter:r=>e({selectedNewsletter:r})}))));const N=E()(y((e=>({notifications:[],addNotification:r=>e((e=>({notifications:[...e.notifications,{...r,id:Date.now().toString()}]}))),removeNotification:r=>e((e=>({notifications:e.notifications.filter((e=>e.id!==r))})))})))),R=({error:e})=>{const{addNotification:r}=N();return i.useEffect((()=>{r({message:`An unexpected error occurred: ${e.message}`,type:"error"})}),[e,r]),null};class A extends n.Component{constructor(e){super(e),this.state={hasError:!1,error:void 0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("Uncaught error:",e),console.error("Error Info:",r.componentStack)}render(){return this.state.hasError?s(t,{children:[this.state.error&&r(R,{error:this.state.error}),this.props.fallback||s("div",{className:"error-boundary",children:[r("h1",{children:"Something went wrong"}),r("p",{children:"We apologize for the inconvenience. Please try again later."}),this.state.error&&s("details",{children:[r("summary",{children:"Error Details"}),r("pre",{children:this.state.error.toString()})]})]})]}):this.props.children}}const j={success:l,error:c,warning:d,info:h},I={success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"},P=()=>{const{notifications:e,removeNotification:t}=N();return n.useEffect((()=>{const r=setTimeout((()=>{e.length>0&&t(e[0].id)}),5e3);return()=>clearTimeout(r)}),[e,t]),r("div",{className:"fixed top-4 right-4 z-[100] space-y-2",children:r(o,{children:e.map((e=>{const n=j[e.type],i=I[e.type];return s(a.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},transition:{duration:.3},className:`flex items-center p-4 rounded-lg shadow-lg text-white ${i}`,children:[r(n,{className:"w-6 h-6 mr-3"}),r("span",{children:e.message}),r("button",{onClick:()=>t(e.id),className:"ml-4 hover:bg-white/20 rounded-full p-1",children:"âœ•"})]},e.id)}))})})},z=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.H))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),D=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.L))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),L=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.R))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),O=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.D))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),T=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.P))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),x=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.b))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),V=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.N))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),S=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.c))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),k=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.d))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),U=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.e))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),C=n.lazy((()=>m((()=>import("./pages-3cea39f5.js").then((e=>e.U))),["assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),q=n.lazy((()=>m((()=>import("./InterestWizard-9d8e62ec.js")),["assets/InterestWizard-9d8e62ec.js","assets/pages-3cea39f5.js","assets/vendor-ui-e4b1e923.js","assets/vendor-b2d6fadb.js","assets/vendor-libs-a0c97417.js"]))),B=()=>r("div",{className:"flex justify-center items-center h-screen",children:r("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-blue-500"})}),F=({children:e,allowedRoles:t})=>r(w,{requiredRoles:t,children:e}),M=()=>{const{isAuthenticated:t}=e();return r(A,{children:r(n.Suspense,{fallback:r(B,{}),children:s("div",{className:"min-h-screen bg-gray-50",children:[r(v,{position:"top-right"}),r(P,{}),s(_,{children:[r(f,{path:"/",element:t()?r(u,{to:"/dashboard"}):r(z,{})}),r(f,{path:"/login",element:t()?r(u,{to:"/dashboard"}):r(D,{})}),r(f,{path:"/register",element:t()?r(u,{to:"/dashboard"}):r(L,{})}),r(f,{path:"/unauthorized",element:r(C,{})}),r(f,{path:"/password-reset",element:r(T,{})}),r(f,{path:"/password-reset-confirm",element:r(x,{})}),r(f,{path:"/discover/interests",element:r(q,{})}),r(f,{path:"/discover/newsletters",element:r(V,{})}),r(f,{path:"/dashboard",element:r(w,{children:r(O,{})})}),r(f,{path:"/profile",element:r(w,{children:r(S,{})})}),r(f,{path:"/newsletters",element:r(F,{allowedRoles:["admin"],children:r(k,{})})}),r(f,{path:"*",element:r(U,{})})]})]})})})},W=n.createContext({user:{id:null,name:null},setUser:()=>{}}),$=({children:e})=>{const[t,s]=n.useState({id:null,name:null});return r(W.Provider,{value:{user:t,setUser:s},children:e})};p.createRoot(document.getElementById("root")).render(r(i.StrictMode,{children:r(g,{children:r($,{children:r(M,{})})})}));export{N as u};
